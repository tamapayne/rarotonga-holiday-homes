---
interface Props {
  name: string;
  slug: string;
  location: string;
  featuredImage: string;
  capacity: number;
  bedrooms: number;
  bathrooms: number;
  price: number;
  amenities: string[];
}

const { name, slug, location, featuredImage, capacity, bedrooms, bathrooms, price, amenities } = Astro.props;

const topAmenities = amenities.slice(0, 3);
---

<a href={`/properties/${slug}`} class="group block bg-white rounded-2xl overflow-hidden shadow-xl shadow-night-900/5 hover:shadow-2xl hover:shadow-coral-500/10 transition-all duration-500 hover:-translate-y-1">
  <div class="relative aspect-[4/3] overflow-hidden">
    <img
      src={featuredImage}
      alt={name}
      class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-out"
      loading="lazy"
    />
    <!-- Gradient overlay for depth -->
    <div class="absolute inset-0 bg-gradient-to-t from-night-900/60 via-transparent to-transparent"></div>

    <!-- Price badge with warm styling -->
    <div class="absolute top-4 right-4">
      <span class="bg-white/95 backdrop-blur-sm text-coral-600 text-sm font-bold px-4 py-2 rounded-full shadow-lg">
        ${price}<span class="text-night-400 font-normal text-xs">/night</span>
      </span>
    </div>

    <!-- Bottom info overlay -->
    <div class="absolute bottom-0 left-0 right-0 p-5 text-white">
      <h3 class="font-display font-semibold text-xl mb-1 group-hover:text-coral-200 transition-colors">
        {name}
      </h3>
      <div class="flex items-center gap-1.5 text-white/80 text-sm">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
        {location}
      </div>
    </div>
  </div>

  <div class="p-5">
    <!-- Property stats with icons -->
    <div class="flex items-center justify-between mb-4 pb-4 border-b border-sand-200">
      <div class="flex items-center gap-1.5 text-night-600">
        <div class="w-8 h-8 rounded-full bg-lagoon-50 flex items-center justify-center">
          <svg class="w-4 h-4 text-lagoon-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </div>
        <span class="text-sm font-medium">{capacity} guests</span>
      </div>
      <div class="flex items-center gap-1.5 text-night-600">
        <div class="w-8 h-8 rounded-full bg-coral-50 flex items-center justify-center">
          <svg class="w-4 h-4 text-coral-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 21V11a2 2 0 012-2h10a2 2 0 012 2v10M3 21h18M3 17h18M7 9V7a2 2 0 012-2h6a2 2 0 012 2v2" />
          </svg>
        </div>
        <span class="text-sm font-medium">{bedrooms} bed</span>
      </div>
      <div class="flex items-center gap-1.5 text-night-600">
        <div class="w-8 h-8 rounded-full bg-sand-100 flex items-center justify-center">
          <svg class="w-4 h-4 text-sand-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h12a2 2 0 012 2v1a5 5 0 01-5 5h-4a5 5 0 01-5-5v-1a2 2 0 012-2zM7 12V6a2 2 0 012-2h1v4M9 20v2m6-2v2" />
          </svg>
        </div>
        <span class="text-sm font-medium">{bathrooms} bath</span>
      </div>
    </div>

    <!-- Amenities as subtle tags -->
    <div class="flex flex-wrap gap-2">
      {topAmenities.map((amenity) => (
        <span class="text-xs bg-sand-100 text-night-600 px-3 py-1.5 rounded-full font-medium">
          {amenity}
        </span>
      ))}
      {amenities.length > 3 && (
        <span class="text-xs bg-coral-50 text-coral-600 px-3 py-1.5 rounded-full font-semibold">
          +{amenities.length - 3} more
        </span>
      )}
    </div>
  </div>
</a>
