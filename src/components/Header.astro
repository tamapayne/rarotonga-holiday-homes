---
const currentPath = Astro.url.pathname;
---

<header class="bg-sand-50/80 backdrop-blur-md border-b border-sand-200/50 sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-18 py-4">
      <a href="/" class="group flex items-center gap-3">
        <img
          src="/favicon_io/android-chrome-192x192.png"
          alt="Rarotonga Escapes logo"
          width="40"
          height="40"
          class="w-10 h-10 rounded-full shadow-lg shadow-coral-500/20 group-hover:shadow-coral-500/40 transition-shadow"
          loading="eager"
        />
        <div class="flex flex-col">
          <span class="font-display font-semibold text-xl text-night-900 tracking-tight">Rarotonga</span>
          <span class="text-xs text-night-500 font-medium tracking-wider uppercase">Escapes</span>
        </div>
      </a>

      <div class="hidden sm:flex items-center gap-8">
        <a
          href="/"
          class:list={[
            "relative text-sm font-medium transition-colors py-2",
            currentPath === "/"
              ? "text-coral-600"
              : "text-night-600 hover:text-coral-600"
          ]}
        >
          Properties
          {currentPath === "/" && (
            <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-coral-500 rounded-full"></span>
          )}
        </a>
        <a
          href="/about"
          class:list={[
            "relative text-sm font-medium transition-colors py-2",
            currentPath === "/about" || currentPath === "/about/"
              ? "text-coral-600"
              : "text-night-600 hover:text-coral-600"
          ]}
        >
          About
          {(currentPath === "/about" || currentPath === "/about/") && (
            <span class="absolute -bottom-1 left-0 right-0 h-0.5 bg-coral-500 rounded-full"></span>
          )}
        </a>
        <a
          href="/enquire"
          class="inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-coral-500 to-coral-600 text-white text-sm font-semibold rounded-full hover:from-coral-600 hover:to-coral-700 transition-all shadow-lg shadow-coral-500/25 hover:shadow-coral-500/40 hover:-translate-y-0.5"
        >
          Enquire Now
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>

      <button
        id="mobile-menu-button"
        class="sm:hidden p-2 text-night-600 hover:text-coral-600 transition-colors"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <div id="mobile-menu" class="hidden sm:hidden pb-4 space-y-2">
      <a
        href="/"
        class:list={[
          "block py-3 px-4 rounded-xl transition-colors font-medium",
          currentPath === "/"
            ? "bg-coral-50 text-coral-600"
            : "text-night-600 hover:bg-sand-100"
        ]}
      >
        Properties
      </a>
      <a
        href="/about"
        class:list={[
          "block py-3 px-4 rounded-xl transition-colors font-medium",
          currentPath === "/about" || currentPath === "/about/"
            ? "bg-coral-50 text-coral-600"
            : "text-night-600 hover:bg-sand-100"
        ]}
      >
        About
      </a>
      <a
        href="/enquire"
        class="block py-3 px-4 bg-gradient-to-r from-coral-500 to-coral-600 text-white font-semibold rounded-xl text-center"
      >
        Enquire Now
      </a>
    </div>
  </nav>
</header>

<script>
  const button = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');

  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });
</script>
